# Athena and S3 Setup

## [Athena] Run the `create_athena_address_tables.sql` script

- Open Amazon Athena in the AWS Management Console

- Create a Database (if not already created):

```sql
CREATE DATABASE IF NOT EXISTS spring_data_aws_db;
CREATE DATABASE IF NOT EXISTS spring_data_aws_hydration_db;
```

- Run the `create_athena_address_tables.sql` script
  - Copy the contents of the `create_athena_address_tables.sql` file
  - Paste the SQL queries into the Athena query editor
  - Execute the queries to create the `legacy_addresses` and `addresses` tables

## [S3] Upload `legacy_addresses.csv` file

- Open the Amazon S3 console

- Go to the `spring-data-aws-bucket` bucket and locate the `legacy-addresses` folder

- Upload the `legacy_addresses.csv` file
  - Click the **Upload** button.
  - Select the `legacy_addresses.csv` file generated by the `generate_address_data.py` script
  - Click **Upload** to complete the process

## Verify Data in Athena

Query the `legacy_addresses` Table:

```sql
SELECT * FROM spring_data_aws_db.legacy_addresses LIMIT 10;
```

Query the `addresses` Table:

```sql
SELECT * FROM spring_data_aws_db.addresses LIMIT 10;
```
